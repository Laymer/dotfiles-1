#!/bin/sh

if [ -z "$1" ]
then
  cd $(pwd)
else
  cd $1
fi

tmux start-server

tmux new-session -d -s rails-app -n rails
tmux split-window -t rails-app:rails -h

tmux last-pane
tmux resize-pane -R -t rails-app:rails.0 20

tmux new-window -t rails-app:2 -n logs

tmux send-keys -t rails-app:rails.0 "vim" C-m
tmux send-keys -t rails-app:rails.1 "guard -c" C-m
tmux send-keys -t rails-app:logs "foreman start" C-m

tmux select-window -t rails-app:rails
tmux select-pane -t rails-app:rails.0

tmux attach-session -d -t rails-app

